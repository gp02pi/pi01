{% comment %}
    Carrega as tags de template do Django para que a tag {% static %}
    possa resolver corretamente os caminhos para os arquivos CSS e JS.
{% endcomment %}
{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <link rel="icon" href="{% static 'img/favi.png' %}" type="image/x-icon">

    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />

    <link rel="stylesheet" href="{% static 'css/inicio.css' %}">
</head>
<body>

    {% comment %}
        Inclusão de componentes de template reutilizáveis (barra de navegação e modal).
    {% endcomment %}
    {% include 'barra.html' %}

    <main class="main-content">
        <div class="dashboard-grid">

            <div class="kpi-total-vendas kpi-card">
                <div class="kpi-card-header">Total de Vendas</div>
                <div class="kpi-card-value" id="kpi-vendas-valor">...</div>
                <div class="kpi-card-footer">R$</div>
            </div>
            <div class="kpi-numero-vendas kpi-card">
                <div class="kpi-card-header">Número de Vendas</div>
                <div class="kpi-card-value" id="kpi-vendas-numero">...</div>
                <div class="kpi-card-footer">Transações</div>
            </div>
            <div class="kpi-estoque kpi-card">
                <div class="kpi-card-header">Produtos em Estoque</div>
                <div class="kpi-card-value" id="kpi-estoque-total">...</div>
                <div class="kpi-card-footer">unidades</div>
            </div>
            <div class="kpi-entradas kpi-card">
                <div class="kpi-card-header">Entrada de Produtos</div>
                <div class="kpi-card-value" id="kpi-entrada-produtos">...</div>
                <div class="kpi-card-footer">unidades</div>
            </div>

            <div class="main-chart chart-container">
                <h2 class="chart-header">Vendas e Estoque</h2>
                <div class="chart-wrapper" id="mainChart-wrapper">
                    <canvas id="mainChart"></canvas>
                </div>
            </div>
            <div class="vendas-produto-chart chart-container">
                <h2 class="chart-header">Vendas por Produto</h2>
                <div class="chart-wrapper" id="inventoryValueChart-wrapper">
                    <canvas id="inventoryValueChart"></canvas>
                </div>
            </div>
            <div class="compras-fornecedor-chart chart-container">
                <h2 class="chart-header">Análise Financeira (Custos vs. Receita)</h2>
                <div class="chart-wrapper" id="payableAgingChart-wrapper">
                    <canvas id="payableAgingChart"></canvas>
                </div>
            </div>
            <div class="map-wrapper chart-container">
                <h2 class="chart-header">Localização de Clientes e Fornecedores <br>
                    <span class="map-warning">A depender dos cadastros, o mapa pode conter inconsistências</span>
                </h2>
                <div id="map-container"></div>
            </div>
            <aside class="side-cards-wrapper">
                <div class="chart-container">
                    <h2 class="chart-header">Cidades com mais clientes</h2>
                    <ul class="location-list" id="top-clientes-list"><li>Carregando...</li></ul>
                </div>
                <div class="chart-container">
                    <h2 class="chart-header">Cidades com mais fornecedores</h2>
                    <ul class="location-list" id="top-fornecedores-list"><li>Carregando...</li></ul>
                </div>
            </aside>
            
            <div class="sales-growth-chart chart-container">
                <h2 class="chart-header">Crescimento de Vendas</h2>
                <div class="chart-wrapper" id="salesTrendChart-wrapper">
                    <canvas id="salesTrendChart"></canvas>
                </div>
            </div>
        </div>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    
    <script src="{% static 'js/inicio.js' %}"></script>
</body>
</html>