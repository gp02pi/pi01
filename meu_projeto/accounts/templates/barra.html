{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Menu Principal</title><link rel="icon" href="{% static 'img/favi.png' %}" type="image/x-icon" /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" /><link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;700&family=Noto+Sans:wght@400;700&display=swap" rel="stylesheet" />
<style>
* {margin: 0;padding: 0;box-sizing: border-box;font-family: "Montserrat", sans-serif;}
body {background-color: #f4f6f9;color: #333;display: flex;flex-direction: column;height: 100vh;overflow-x: hidden;position: relative;}
.top-menu {background-color: #fff;width: 100%;height: 60px;position: fixed;top: 0;left: 0;padding: 10px 30px;display: flex;align-items: center;justify-content: space-between;border-bottom: 2px solid #ddd;box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);z-index: 1000;}
.logo {display: flex;align-items: center;gap: 15px;}
.logo img {height: 40px;}
.main-menu {display: flex;list-style: none;align-items: center;margin: 0;padding: 0;}
.main-menu li {margin: 0 12px;}
.main-menu li a {text-decoration: none;color: #555;font-size: 14px;padding: 10px 5px;display: flex;align-items: center;font-weight: 500;transition: color 0.3s ease-in-out;}
.main-menu li a:hover,.main-menu li a:focus {color: #26A0B8;outline: none;}
.main-menu li a i {margin-right: 8px;font-size: 18px;width: 20px;text-align: center;}
.user-profile-fixed {position: fixed;top: 17px;right: 30px;z-index: 1001;}
.profile-menu {position: relative;display: inline-block;cursor: pointer;}
.profile-menu button {background: none;border: none;cursor: pointer;padding: 0;display: flex;align-items: center;gap: 8px;color: #555;font-weight: 500;}
.profile-menu button:hover {color: #646464;}
.profile-menu .fa-circle-user {font-size: 24px;color: #5e5e5e;}
.profile-dropdown {display: none;position: absolute;top: 100%;right: 0;background-color: #fff;min-width: 160px;box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);z-index: 1001;border-radius: 8px;margin-top: 10px;overflow: hidden;animation: fadeInDropdown 0.2s ease-in-out;}
.profile-dropdown.show {display: block;}
.profile-dropdown a {color: #333;padding: 12px 16px;text-decoration: none;display: block;font-size: 14px;font-weight: 500;}
.profile-dropdown a:hover {background-color: #f0f0f0;color: #26A0B8;}
@keyframes fadeInDropdown {from {opacity: 0;transform: translateY(-10px);}to {opacity: 1;transform: translateY(0);}}
@media (max-width: 768px) {.main-menu {display: none;}}
.popup-overlay {position: fixed;inset: 0;background: rgba(0, 0, 0, 0.45);display: none;align-items: center;justify-content: center;z-index: 9999;backdrop-filter: blur(4px);}
.popup {background: #fff;padding: 35px 40px;border-radius: 12px;width: 380px;max-width: 90vw;box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);text-align: center;animation: popupFadeIn 0.3s ease forwards;color: #2c3e50;font-size: 16px;font-weight: 500;}
@keyframes popupFadeIn {from {opacity: 0;transform: translateY(-20px) scale(0.95);}to {opacity: 1;transform: translateY(0) scale(1);}}
.popup .icon {color: #e74c3c;font-size: 56px;margin-bottom: 18px;animation: bounceIn 0.6s ease;}
@keyframes bounceIn {0% {transform: scale(0.3);opacity: 0;}50% {transform: scale(1.1);}70% {transform: scale(0.9);}100% {transform: scale(1);opacity: 1;}}
.popup .buttons {display: flex;justify-content: center;gap: 16px;margin-top: 28px;}
.btn-cancel {background-color: #e0e0e0;color: #333;border: none;padding: 12px 26px;border-radius: 8px;font-weight: 600;font-size: 15px;cursor: pointer;transition: background-color 0.2s ease;}
.btn-cancel:hover,.btn-cancel:focus {background-color: #cacaca;outline: none;}
.btn-confirm {background-color: #d63031;color: #fff;border: none;padding: 12px 26px;border-radius: 8px;font-weight: 600;font-size: 15px;cursor: pointer;transition: background-color 0.2s ease, box-shadow 0.2s ease;}
.btn-confirm:hover,.btn-confirm:focus {background-color: #c02d2d;outline: none;}
</style>
</head>
<body>
<nav class="top-menu" role="navigation" aria-label="Menu principal">
<div class="logo">
<img src="{% static 'img/icon2.png' %}" alt="Logo da empresa" />
<ul class="main-menu" role="menubar">
<li role="none"><a role="menuitem" href="{% url 'inicio' %}"><i class="fa-solid fa-house" aria-hidden="true"></i> Início</a></li>
<li role="none"><a role="menuitem" href="{% url 'produtos' %}"><i class="fa-solid fa-box-open" aria-hidden="true"></i> Produtos</a></li>
<li role="none"><a role="menuitem" href="{% url 'fornecedores' %}"><i class="fa-solid fa-truck-fast" aria-hidden="true"></i> Fornecedores</a></li>
<li role="none"><a role="menuitem" href="{% url 'clientes' %}"><i class="fa-solid fa-users" aria-hidden="true"></i> Clientes</a></li>
<li role="none"><a role="menuitem" href="{% url 'vendas' %}"><i class="fa-solid fa-chart-line" aria-hidden="true"></i> Vendas</a></li>
<li role="none"><a role="menuitem" href="{% url 'relatorios' %}"><i class="fa-solid fa-chart-pie" aria-hidden="true"></i> Relatórios</a></li>
</ul>
</div>
</nav>
<div class="user-profile-fixed">
<div class="profile-menu">
<button id="profile-toggle" aria-haspopup="true" aria-expanded="false" title="Menu do Usuário">
<i class="fa-solid fa-circle-user" aria-hidden="true"></i>
</button>
<div id="profile-dropdown" class="profile-dropdown" role="menu">
<a href="{% url 'configuracoes' %}" role="menuitem"><i class="fa-solid fa-gear"></i> Configurações</a>
<a href="https://wa.me/5511999999999?text=Olá,%20preciso%20de%20suporte." target="_blank" role="menuitem"><i class="fab fa-whatsapp"></i> Suporte</a>
<a id="logout-btn" role="menuitem" aria-haspopup="dialog" aria-controls="logout-popup"><i class="fa-solid fa-right-from-bracket"></i> Sair</a>
</div>
</div>
</div>
<div class="popup-overlay" id="logout-popup" role="dialog" aria-modal="true" tabindex="-1" aria-labelledby="logout-title" aria-describedby="popup-desc">
<div class="popup">
<i class="fa-solid fa-triangle-exclamation icon" aria-hidden="true"></i>
<h2 id="logout-title" style="margin-bottom:10px; color:#2c3e50;">Confirmação de Saída</h2>
<p id="popup-desc">Tem certeza de que deseja sair?</p>
<div class="buttons">
<button type="button" class="btn-cancel" id="cancel-logout">Cancelar</button>
<button type="button" class="btn-confirm" id="confirm-logout">Sair</button>
</div>
</div>
</div>
<script>
const profileToggle = document.getElementById("profile-toggle");
const profileDropdown = document.getElementById("profile-dropdown");
const logoutBtn = document.getElementById("logout-btn");
const popupOverlay = document.getElementById("logout-popup");
const cancelBtn = document.getElementById("cancel-logout");
const confirmBtn = document.getElementById("confirm-logout");

profileToggle.addEventListener("click", () => {
const isExpanded = profileToggle.getAttribute("aria-expanded") === "true" || false;
profileToggle.setAttribute("aria-expanded", !isExpanded);
profileDropdown.classList.toggle("show");
});

document.addEventListener("click", (e) => {
if (!profileToggle.contains(e.target) && !profileDropdown.contains(e.target)) {
profileDropdown.classList.remove("show");
profileToggle.setAttribute("aria-expanded", "false");
}
});

logoutBtn.addEventListener("click", (e) => {
e.preventDefault();
popupOverlay.style.display = "flex";
popupOverlay.focus();
});

cancelBtn.addEventListener("click", () => {
popupOverlay.style.display = "none";
profileToggle.focus();
});

confirmBtn.addEventListener("click", () => {
window.location.replace("{% url 'logout' %}");
});

popupOverlay.addEventListener("keydown", (e) => {
if (e.key === "Escape") {
popupOverlay.style.display = "none";
profileToggle.focus();
}
});

function getCookie(name) {
let cookieValue = null;
if (document.cookie && document.cookie !== '') {
const cookies = document.cookie.split(';');
for (let cookie of cookies) {
cookie = cookie.trim();
if (cookie.startsWith(name + '=')) {
cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
break;
}
}
}
return cookieValue;
}
</script>
</body>
</html>